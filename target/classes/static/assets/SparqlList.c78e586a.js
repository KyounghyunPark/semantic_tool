import{p as D,b,r as s,o as d,g as m,f as S,c as l,e as r,_ as P,d as f,F as g,n as L,k as A,t as k,h as x}from"./index.5ded1198.js";const E={name:"ExapndSparqlDialog",props:{propsIsDialog:{type:Boolean,required:!0},propsSparql:{type:String,required:!0}},data(){return{isDialog:!1,sparql:"",options:{fontSize:14,automaticLayout:!0,minimap:{enabled:!1}},monaco:void 0}},created(){this.isDialog=this.propsIsDialog,this.sparql=this.propsSparql},methods:{apply(){this.returnData=this.sparql,this.close()},close(){this.isDialog=!1},editorWillMount(e){this.monaco=e},editorDidMount(e){this.monaco.editor.defineTheme("myTheme",{base:"vs-dark",inherit:!0,rules:[{background:"#1F2128"}],colors:{"editor.background":"#1F2128"}}),this.monaco.editor.setTheme("myTheme")},onHidden(e){this.$emit("close",this.returnData)}}};const C={class:"dialogPanel"},I={class:"editPanel"},H={class:"footerPanel"};function M(e,t,c,y,i,a){const h=s("MonacoEditor"),p=s("DxButton"),u=s("DxPopup");return d(),m(u,{visible:i.isDialog,"onUpdate:visible":t[3]||(t[3]=n=>i.isDialog=n),"drag-enabled":!0,"hide-on-outside-click":!1,"show-close-button":!0,"show-title":!0,width:800,height:"80%",title:"SPARQL Editor",container:"body",onHidden:t[4]||(t[4]=n=>a.onHidden(n))},{default:S(()=>[l("div",C,[l("div",I,[r(h,{options:i.options,language:"sparql",value:i.sparql,"onUpdate:value":t[0]||(t[0]=n=>i.sparql=n),onEditorWillMount:a.editorWillMount,onEditorDidMount:a.editorDidMount},null,8,["options","value","onEditorWillMount","onEditorDidMount"])]),l("div",H,[r(p,{class:"purple",type:"normal",text:"Apply",width:"80",onClick:t[1]||(t[1]=n=>a.apply())}),r(p,{class:"gray",type:"normal",text:"Close",width:"80",onClick:t[2]||(t[2]=n=>a.close())})])])]),_:1},8,["visible"])}var T=P(E,[["render",M],["__scopeId","data-v-080d1d32"]]);const z={name:"SparqlList",components:{ExpandSparqlDialog:T},data(){return{isExpandSparqlDialog:!1,options:{fontSize:14,automaticLayout:!0,minimap:{enabled:!1},lineNumbers:"off"},monaco:void 0,sparqlHistorys:[],sparql:`SELECT *
WHERE {
  ?s <https://etri.re.kr#dt-id> "http://dtid.org/3091b292-6104-4ef3-a30f-8275b46b5ab4" .
  ?s <https://etri.re.kr#relations> ?o .
  ?o <https://etri.re.kr#dt-id> ?id .
  ?o <https://etri.re.kr#relationType> ?type .
}`,resultData:""}},mounted(){localStorage.getItem("sparqlHistory")&&(this.sparqlHistorys=JSON.parse(localStorage.getItem("sparqlHistory")))},methods:{editorWillMount(e){this.monaco=e},editorDidMount(e){this.monaco.editor.defineTheme("myTheme",{base:"vs-dark",inherit:!0,rules:[{background:"#1F2128"}],colors:{"editor.background":"#1F2128"}}),this.monaco.editor.setTheme("myTheme")},onSearchClick(){if(!this.sparql){alert("SPARQL\uC744 \uC785\uB825\uD558\uC138\uC694.");return}this.emitter.emit("setLoading",!0),this.resultData="",this.sparqlHistorys.length==5&&this.sparqlHistorys.splice(0,1),this.sparqlHistorys.push(this.sparql),localStorage.setItem("sparqlHistory",JSON.stringify(this.sparqlHistorys));let e={sparql:this.sparql};fetch("/api/twin/getSparql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{this.emitter.emit("setLoading",!1),t.succeeded?this.resultData=t.data:this.emitter.emit("showErrorDialog",t.data)}).catch(t=>{this.emitter.emit("setLoading",!1),console.error(t),this.emitter.emit("showErrorDialog",t)})},onJSONViewClick(e){this.jsonViewData=JSON.stringify(e,null,2),this.isJsonViewDialog=!0},closeJsonViewDialog(){this.jsonViewData="",this.isJsonViewDialog=!1},onExpandSparqlClick(){this.isExpandSparqlDialog=!0},closeExpandSparqlDialog(e){this.isExpandSparqlDialog=!1,e&&(this.sparql=e)},onDeleteTwin(e){if(window.confirm("\uC120\uD0DD\uD55C TWIN\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")){let c=this.allTwinList.indexOf(e);c!==-1&&this.allTwinList.splice(c,1),this.onSearchClick()}},onHistoryDelete(e){this.sparqlHistorys.splice(e,1),localStorage.setItem("sparqlHistory",JSON.stringify(this.sparqlHistorys))},onSparqlHistoryClick(e){this.sparql=e}}},w=e=>(D("data-v-03fc1174"),e=e(),b(),e),V={id:"twinAllList"},N={class:"filterPanel"},W={class:"editorPanel"},j={class:"buttonPanel"},B={key:0,class:"historyPanel"},J=w(()=>l("div",{class:"title"}," SPARQL HISTORY ",-1)),O={class:"history"},F=["title","onClick"],R={class:"item-text"},Q=["onClick"],U={class:"listPanel"},Y=w(()=>l("div",{class:"title"}," Result View ",-1)),G={class:"contentPanel"};function K(e,t,c,y,i,a){const h=s("MonacoEditor"),p=s("DxButton"),u=s("font-awesome-icon"),n=s("DxTextArea"),v=s("ExpandSparqlDialog");return d(),f(g,null,[l("div",V,[l("div",N,[l("div",{class:L(i.sparqlHistorys.length>0?"textAreaPanel sparqlVisible":"textAreaPanel")},[l("div",W,[r(h,{options:i.options,language:"sparql",value:i.sparql,"onUpdate:value":t[0]||(t[0]=o=>i.sparql=o),onEditorWillMount:a.editorWillMount,onEditorDidMount:a.editorDidMount},null,8,["options","value","onEditorWillMount","onEditorDidMount"])]),l("div",j,[r(p,{class:"purple",type:"normal",text:"Expand Editor",onClick:a.onExpandSparqlClick},null,8,["onClick"]),r(p,{class:"purple",type:"normal",text:"Run Query",onClick:t[1]||(t[1]=o=>a.onSearchClick(o))})])],2),i.sparqlHistorys.length>0?(d(),f("div",B,[J,l("div",O,[(d(!0),f(g,null,A(i.sparqlHistorys,(o,_)=>(d(),f("div",{class:"item",title:o,onClick:q=>a.onSparqlHistoryClick(o)},[l("div",R,k(o),1),l("div",{class:"item-icon",onClick:q=>a.onHistoryDelete(_)},[r(u,{icon:"fa-solid fa-times"})],8,Q)],8,F))),256))])])):x("",!0)]),l("div",U,[Y,l("div",G,[r(n,{"read-only":!0,value:i.resultData,"onUpdate:value":t[2]||(t[2]=o=>i.resultData=o)},null,8,["value"])])])]),i.isExpandSparqlDialog?(d(),m(v,{key:0,propsIsDialog:i.isExpandSparqlDialog,propsSparql:i.sparql,onClose:a.closeExpandSparqlDialog},null,8,["propsIsDialog","propsSparql","onClose"])):x("",!0)],64)}var Z=P(z,[["render",K],["__scopeId","data-v-03fc1174"]]);export{Z as default};
