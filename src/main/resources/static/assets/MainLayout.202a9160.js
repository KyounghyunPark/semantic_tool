var k=Object.defineProperty,I=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var L=(t,e,i)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,f=(t,e)=>{for(var i in e||(e={}))M.call(e,i)&&L(t,i,e[i]);if(x)for(var i of x(e))S.call(e,i)&&L(t,i,e[i]);return t},P=(t,e)=>I(t,D(e));import{m as C,a as F,p as ye,b as we,o as n,d as c,_ as v,r as h,F as U,c as a,n as g,g as p,h as r,e as s,f as b}from"./index.5ded1198.js";import{C as B}from"./CreateTwinDialog.5d19182e.js";import{F as z}from"./JsonViewDialog.d6519c3d.js";const N={name:"HeaderLayout",data(){return{userName:"",isMenuFolded:!1}},computed:f({},C(["getUserInfo"])),mounted(){},methods:P(f({},F(["setUserInfo","removeUserInfo"])),{checkLogin(){if(this.getUserInfo&&this.getUserInfo.userId)this.userName=this.getUserInfo.userName;else{let t=JSON.parse(localStorage.getItem("userInfo"));t&&t.userId?(this.userName=t.userName,this.setUserInfo({id:t.userId,name:t.userName,description:t.description})):(this.userName="",this.$router.push("/login"))}},clickMain(){this.checkLogin()},clickFolded(){this.isMenuFolded=!this.isMenuFolded}})};const A={id:"headerLayout"};function $(t,e,i,_,o,l){return n(),c("div",A)}var j=v(N,[["render",$],["__scopeId","data-v-c75974e8"]]),E="/assets/images/machinaide_logo_white.png";const R={name:"LeftLayout",components:{CreateTwinDialog:B},data(){return{isCreateTwinDialog:!1,isMenuFolded:!1,isLayoutUnfoldedToText:!0,activePageId:"twinAllList"}},mounted(){this.activePageId=this.$router.currentRoute.value.path.substr(1).split("/")[0],this.setActivePage(),this.emitter.on("changeMenu",this.changeMenu),window.addEventListener("popstate",this.onBackButton)},beforeUnmount(){this.emitter.off("changeMenu"),window.removeEventListener("popstate",this.onBackButton)},methods:{showCreateTwinDialog(){this.isCreateTwinDialog=!0},closeCreateTwinDialog(){this.isCreateTwinDialog=!1},onBackButton(t){let e=this.$router.currentRoute.value.path.substr(1);this.changeMenu(e)},changeLayout(){setTimeout(()=>{this.setActivePage(),this.isMenuFolded=!this.isMenuFolded,this.isLayoutUnfoldedToText=!this.isLayoutUnfoldedToText,this.emitter.emit("changeLeftLayout",this.isMenuFolded)},10)},changeMenu(t){this.setDisablePage(),this.activePageId=t.split("/")[0],this.$router.push("/"+t).catch(()=>{}),this.setActivePage()},setActivePage(){this.activePageId&&document.getElementById(this.activePageId).classList.add("activeButton")},setDisablePage(){this.activePageId&&document.getElementById(this.activePageId).classList.remove("activeButton")},onCreateTwinClick(){this.showCreateTwinDialog()},onCollectTwinsClick(){this.emitter.emit("showConfirmDialog",{message:`Twin Base\uC5D0\uC11C \uB370\uC774\uD130\uB97C \uC218\uC9D1\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?
\uAE30\uC874 \uB370\uC774\uD130\uB294 \uCD08\uAE30\uD654 \uB429\uB2C8\uB2E4.`,isConfirm:!0,callback:t=>{t&&(this.emitter.emit("setLoading",!0),fetch("/api/twin/collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(e=>e.json()).then(e=>{this.emitter.emit("setLoading",!1),e.succeeded?(this.emitter.emit("showConfirmDialog",{message:"Collect Twins Complete",isConfirm:!1}),this.emitter.emit("twinsChanged")):this.emitter.emit("showErrorDialog",e.data)}).catch(e=>{this.emitter.emit("setLoading",!1),console.error(e),this.emitter.emit("showErrorDialog",e)}))}})},onDownloadAllTwinsClick(){this.emitter.emit("setLoading",!0);let t={type:"all"},e="all_twin_json.zip";fetch("/api/twin/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(i=>{if(i.status===200)return e=i.headers.get("content-disposition").match(new RegExp('(?<=")(?:\\\\.|[^"\\\\])*(?=")'))[0],i.blob();if(i.status===204)return"\uB4F1\uB85D\uB41C TWIN\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.";if(i.status===400)return Promise.reject("\uD30C\uB9AC\uBBF8\uD130\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");if(i.status==500)return Promise.reject("\uC11C\uBC84\uC5D0\uC11C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.")}).then(i=>{this.emitter.emit("setLoading",!1),typeof i=="string"?this.emitter.emit("showConfirmDialog",{message:i,isConfirm:!1}):z.exports.saveAs(i,e)}).catch(i=>{this.emitter.emit("setLoading",!1),this.emitter.emit("showErrorDialog",i)})}}};const W={id:"leftLayout"},H={class:"topPanel"},O={class:"logoPanel"},q={class:"menuPanel"},J={class:"menuItemPanel"},V={key:0},G={class:"menuItemPanel"},Q={key:0},K={class:"menuItemPanel"},X={key:0},Y={class:"menuItemPanel"},Z={key:0},ee={class:"menuItemPanel"},te={key:0},ae={class:"menuItemPanel"},ie={key:0};function oe(t,e,i,_,o,l){const d=h("font-awesome-icon"),m=h("CreateTwinDialog");return n(),c(U,null,[a("div",W,[a("div",H,[a("div",O,[a("img",{src:E,class:g(o.isMenuFolded?"foldedimage":"")},null,2)]),a("div",{class:"expand",onClick:e[0]||(e[0]=(...u)=>l.changeLayout&&l.changeLayout(...u))},[o.isMenuFolded?r("",!0):(n(),p(d,{key:0,icon:"fa-solid fa-caret-left"})),o.isMenuFolded?(n(),p(d,{key:1,icon:"fa-solid fa-caret-right"})):r("",!0)])]),a("div",q,[a("div",J,[a("button",{id:"twinAllList",onClick:e[1]||(e[1]=u=>l.changeMenu("twinAllList"))},[s(d,{icon:"fa-solid fa-list"}),o.isLayoutUnfoldedToText?(n(),c("label",V,"Twins All List")):r("",!0)])]),a("div",G,[a("button",{id:"sparqlList",onClick:e[2]||(e[2]=u=>l.changeMenu("sparqlList"))},[s(d,{icon:"fa-solid fa-project-diagram"}),o.isLayoutUnfoldedToText?(n(),c("label",Q,"Select SPARQL")):r("",!0)])]),a("div",K,[a("button",{id:"createTwin",onClick:e[3]||(e[3]=u=>l.onCreateTwinClick())},[s(d,{icon:"fa-solid fa-plus-circle"}),o.isLayoutUnfoldedToText?(n(),c("label",X,"Create Twin")):r("",!0)])]),a("div",Y,[a("button",{id:"detailInformation",onClick:e[4]||(e[4]=u=>l.changeMenu("detailInformation/all"))},[s(d,{icon:"fa-solid fa-network-wired"}),o.isLayoutUnfoldedToText?(n(),c("label",Z,"Graph Information")):r("",!0)])]),a("div",ee,[a("button",{id:"collectTwins",onClick:e[5]||(e[5]=u=>l.onCollectTwinsClick())},[s(d,{icon:"fa-solid fa-share-square"}),o.isLayoutUnfoldedToText?(n(),c("label",te,"Collect Twins")):r("",!0)])]),a("div",ae,[a("button",{id:"collectTwins",onClick:e[6]||(e[6]=u=>l.onDownloadAllTwinsClick())},[s(d,{icon:"fa-solid fa-download"}),o.isLayoutUnfoldedToText?(n(),c("label",ie,"Download All Twins")):r("",!0)])])])]),o.isCreateTwinDialog?(n(),p(m,{key:0,propsIsDialog:o.isCreateTwinDialog,onClose:l.closeCreateTwinDialog},null,8,["propsIsDialog","onClose"])):r("",!0)],64)}var ne=v(R,[["render",oe],["__scopeId","data-v-d91a9cda"]]);const se={name:"MainLayout",components:{HeaderLayout:j,LeftLayout:ne},data(){return{isMenuFolded:!1,openState:!1,isSmallScreen:!0}},computed:f({},C(["getUserInfo"])),created(){this.onWindowsResize()},mounted(){this.emitter.on("changeLeftLayout",this.changeLayout),window.addEventListener("resize",this.onWindowsResize)},beforeUnmount(){this.emitter.off("changeLeftLayout"),window.removeEventListener("resize",this.onWindowsResize)},methods:{onWindowsResize(t){document.body.clientWidth<1e3?this.isSmallScreen=!0:this.isSmallScreen=!1},changeLayout(t){this.isMenuFolded=t}}};const le={id:"mainLayout"},de={key:0,class:"small-screen"},re={class:"headerPanel"},ce={class:"drawPanel"},ue={class:"leftPanel"},he={class:"centerPanel"},fe={key:1,class:"large-screen"},me={class:"headerPanel"},pe={class:"contentPanel"};function ge(t,e,i,_,o,l){const d=h("HeaderLayout"),m=h("font-awesome-icon"),u=h("LeftLayout"),y=h("router-view"),T=h("DxDrawer");return n(),c("div",le,[o.isSmallScreen?(n(),c("div",de,[a("div",re,[s(d),a("button",{id:"twinAllList",onClick:e[0]||(e[0]=w=>o.openState=!o.openState)},[s(m,{icon:"fa-solid fa-bars"})])]),a("div",ce,[s(T,{"opened-state-mode":"overlap",position:"left","reveal-mode":"slide",opened:o.openState,"onUpdate:opened":e[1]||(e[1]=w=>o.openState=w),height:"100%","close-on-outside-click":!0,template:"listMenu"},{listMenu:b(()=>[a("div",ue,[s(u)])]),default:b(()=>[a("div",he,[s(y)])]),_:1},8,["opened"])])])):r("",!0),o.isSmallScreen?r("",!0):(n(),c("div",fe,[a("div",{class:g(o.isMenuFolded?"leftPanel foldedLeftPanel":"leftPanel")},[s(u)],2),a("div",{class:g(o.isMenuFolded?"centerPanel foldedCenterPanel":"centerPanel")},[a("div",me,[s(d)]),a("div",pe,[s(y)])],2)]))])}var Pe=v(se,[["render",ge],["__scopeId","data-v-727a7d4c"]]);export{Pe as default};
